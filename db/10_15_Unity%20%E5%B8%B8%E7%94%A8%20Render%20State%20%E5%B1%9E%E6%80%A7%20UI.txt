<html><head></head><body><h1 id="Unity-常用-Render-State-属性-UI">Unity 常用 Render State 属性 UI<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#Unity-%E5%B8%B8%E7%94%A8-Render-State-%E5%B1%9E%E6%80%A7-UI" title="Permanent link">¶</a></h1>
<!-- more -->

<p>有时候想把 <code>ZTest</code>、<code>Cull</code> 等属性暴露到面板中配置，避免重复写相似的 Shader。这里直接把常用的都整理出来。</p>
<p>参考：<a href="https://zhuanlan.zhihu.com/p/93194054">Shader面板上常用的一些内置枚举UI - 知乎</a>。</p>
<h2 id="Properties">Properties<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#Properties" title="Permanent link">¶</a></h2>
<div class="highlight"><pre><span></span><code>[Header(Option)]
[Enum(UnityEngine.Rendering.CullMode)] _CullMode(&#34;Cull Mode&#34;, float) = 2
[Enum(UnityEngine.Rendering.ColorWriteMask)] _ColorMask(&#34;Color Mask&#34;, Float) = 15
[Enum(Off, 0, On, 1)] _ZWriteMode(&#34;ZWrite Mode&#34;, float) = 1
[Enum(UnityEngine.Rendering.CompareFunction)] _ZTestMode(&#34;ZTest Mode&#34;, Float) = 4

[Header(Blend)]
[Enum(UnityEngine.Rendering.BlendOp)] _BlendOp(&#34;Blend Op&#34;, Float) = 0
[Enum(UnityEngine.Rendering.BlendMode)] _SrcBlend(&#34;Src Blend&#34;, Float) = 1
[Enum(UnityEngine.Rendering.BlendMode)] _DstBlend(&#34;Dst Blend&#34;, Float) = 0

[Header(Stencil)]
[IntRange] _StencilRef(&#34;Stencil Ref&#34;, Range(0, 255)) = 0
[IntRange] _StencilReadMask(&#34;Stencil ReadMask&#34;, Range(0, 255)) = 255
[IntRange] _StencilWriteMask(&#34;Stencil WriteMask&#34;, Range(0, 255)) = 255
[Enum(UnityEngine.Rendering.CompareFunction)] _StencilComp(&#34;Stencil Comp&#34;, Float) = 8
[Enum(UnityEngine.Rendering.StencilOp)] _StencilPass(&#34;Stencil Pass&#34;, Float) = 0
[Enum(UnityEngine.Rendering.StencilOp)] _StencilFail(&#34;Stencil Fail&#34;, Float) = 0
[Enum(UnityEngine.Rendering.StencilOp)] _StencilZFail(&#34;Stencil ZFail&#34;, Float) = 0
</code></pre></div>
<p>建议自己写一个 <code>MaterialPropertyDrawer</code> 绘制 <code>_ColorMask</code>。因为 <code>ColorWriteMask</code> 是一个 Flags，但是 <code>[Enum(UnityEngine.Rendering.ColorWriteMask)]</code> 只能绘制成普通 Enum，无法组合多个值。</p>
<h2 id="Commands">Commands<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#Commands" title="Permanent link">¶</a></h2>
<p>相关文档：<a href="https://docs.unity3d.com/Manual/shader-shaderlab-commands.html">ShaderLab: commands</a>。</p>
<div class="highlight"><pre><span></span><code>Cull [_CullMode]
ColorMask [_ColorMask]
ZWrite [_ZWriteMode]
ZTest [_ZTestMode]

BlendOp [_BlendOp]
Blend [_SrcBlend] [_DstBlend]

Stencil
{
    Ref [_StencilRef]
    ReadMask [_StencilReadMask]
    WriteMask [_StencilWriteMask]
    Comp [_StencilComp]
    Pass [_StencilPass]
    Fail [_StencilFail]
    ZFail [_StencilZFail]
}
</code></pre></div>
<h2 id="Enum-表">Enum 表<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#Enum-%E8%A1%A8" title="Permanent link">¶</a></h2>
<p>相关的枚举都声明在 <a href="https://github.com/Unity-Technologies/UnityCsReference/blob/master/Runtime/Export/Graphics/GraphicsEnums.cs">Runtime/Export/Graphics/GraphicsEnums.cs</a> 里。</p>
<p>下面的表基于 Unity 2023.3.0b5 的代码。</p>
<h3 id="BlendMode">BlendMode<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#BlendMode" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Zero</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">One</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">DstColor</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">SrcColor</td>
<td style="text-align: left;">3</td>
</tr>
<tr>
<td style="text-align: left;">OneMinusDstColor</td>
<td style="text-align: left;">4</td>
</tr>
<tr>
<td style="text-align: left;">SrcAlpha</td>
<td style="text-align: left;">5</td>
</tr>
<tr>
<td style="text-align: left;">OneMinusSrcColor</td>
<td style="text-align: left;">6</td>
</tr>
<tr>
<td style="text-align: left;">DstAlpha</td>
<td style="text-align: left;">7</td>
</tr>
<tr>
<td style="text-align: left;">OneMinusDstAlpha</td>
<td style="text-align: left;">8</td>
</tr>
<tr>
<td style="text-align: left;">SrcAlphaSaturate</td>
<td style="text-align: left;">9</td>
</tr>
<tr>
<td style="text-align: left;">OneMinusSrcAlpha</td>
<td style="text-align: left;">10</td>
</tr>
</tbody>
</table>
<h3 id="BlendOp">BlendOp<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#BlendOp" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Add</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Subtract</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">ReverseSubtract</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Min</td>
<td style="text-align: left;">3</td>
</tr>
<tr>
<td style="text-align: left;">Max</td>
<td style="text-align: left;">4</td>
</tr>
<tr>
<td style="text-align: left;">LogicalClear</td>
<td style="text-align: left;">5</td>
</tr>
<tr>
<td style="text-align: left;">LogicalSet</td>
<td style="text-align: left;">6</td>
</tr>
<tr>
<td style="text-align: left;">LogicalCopy</td>
<td style="text-align: left;">7</td>
</tr>
<tr>
<td style="text-align: left;">LogicalCopyInverted</td>
<td style="text-align: left;">8</td>
</tr>
<tr>
<td style="text-align: left;">LogicalNoop</td>
<td style="text-align: left;">9</td>
</tr>
<tr>
<td style="text-align: left;">LogicalInvert</td>
<td style="text-align: left;">10</td>
</tr>
<tr>
<td style="text-align: left;">LogicalAnd</td>
<td style="text-align: left;">11</td>
</tr>
<tr>
<td style="text-align: left;">LogicalNand</td>
<td style="text-align: left;">12</td>
</tr>
<tr>
<td style="text-align: left;">LogicalOr</td>
<td style="text-align: left;">13</td>
</tr>
<tr>
<td style="text-align: left;">LogicalNor</td>
<td style="text-align: left;">14</td>
</tr>
<tr>
<td style="text-align: left;">LogicalXor</td>
<td style="text-align: left;">15</td>
</tr>
<tr>
<td style="text-align: left;">LogicalEquivalence</td>
<td style="text-align: left;">16</td>
</tr>
<tr>
<td style="text-align: left;">LogicalAndReverse</td>
<td style="text-align: left;">17</td>
</tr>
<tr>
<td style="text-align: left;">LogicalAndInverted</td>
<td style="text-align: left;">18</td>
</tr>
<tr>
<td style="text-align: left;">LogicalOrReverse</td>
<td style="text-align: left;">19</td>
</tr>
<tr>
<td style="text-align: left;">LogicalOrInverted</td>
<td style="text-align: left;">20</td>
</tr>
<tr>
<td style="text-align: left;">Multiply</td>
<td style="text-align: left;">21</td>
</tr>
<tr>
<td style="text-align: left;">Screen</td>
<td style="text-align: left;">22</td>
</tr>
<tr>
<td style="text-align: left;">Overlay</td>
<td style="text-align: left;">23</td>
</tr>
<tr>
<td style="text-align: left;">Darken</td>
<td style="text-align: left;">24</td>
</tr>
<tr>
<td style="text-align: left;">Lighten</td>
<td style="text-align: left;">25</td>
</tr>
<tr>
<td style="text-align: left;">ColorDodge</td>
<td style="text-align: left;">26</td>
</tr>
<tr>
<td style="text-align: left;">ColorBurn</td>
<td style="text-align: left;">27</td>
</tr>
<tr>
<td style="text-align: left;">HardLight</td>
<td style="text-align: left;">28</td>
</tr>
<tr>
<td style="text-align: left;">SoftLight</td>
<td style="text-align: left;">29</td>
</tr>
<tr>
<td style="text-align: left;">Difference</td>
<td style="text-align: left;">30</td>
</tr>
<tr>
<td style="text-align: left;">Exclusion</td>
<td style="text-align: left;">31</td>
</tr>
<tr>
<td style="text-align: left;">HSLHue</td>
<td style="text-align: left;">32</td>
</tr>
<tr>
<td style="text-align: left;">HSLSaturation</td>
<td style="text-align: left;">33</td>
</tr>
<tr>
<td style="text-align: left;">HSLColor</td>
<td style="text-align: left;">34</td>
</tr>
<tr>
<td style="text-align: left;">HSLLuminosity</td>
<td style="text-align: left;">35</td>
</tr>
</tbody>
</table>
<h3 id="CompareFunction">CompareFunction<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#CompareFunction" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Disabled</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Never</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">Less</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Equal</td>
<td style="text-align: left;">3</td>
</tr>
<tr>
<td style="text-align: left;">LessEqual</td>
<td style="text-align: left;">4</td>
</tr>
<tr>
<td style="text-align: left;">Greater</td>
<td style="text-align: left;">5</td>
</tr>
<tr>
<td style="text-align: left;">NotEqual</td>
<td style="text-align: left;">6</td>
</tr>
<tr>
<td style="text-align: left;">GreaterEqual</td>
<td style="text-align: left;">7</td>
</tr>
<tr>
<td style="text-align: left;">Always</td>
<td style="text-align: left;">8</td>
</tr>
</tbody>
</table>
<h3 id="CullMode">CullMode<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#CullMode" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Off</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Front</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">Back</td>
<td style="text-align: left;">2</td>
</tr>
</tbody>
</table>
<h3 id="ColorWriteMask">ColorWriteMask<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#ColorWriteMask" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value (Flags)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Alpha</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">Blue</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">Green</td>
<td style="text-align: left;">4</td>
</tr>
<tr>
<td style="text-align: left;">Red</td>
<td style="text-align: left;">8</td>
</tr>
<tr>
<td style="text-align: left;">All</td>
<td style="text-align: left;">15</td>
</tr>
</tbody>
</table>
<h3 id="StencilOp">StencilOp<a class="headerlink" href="https://note.stalomeow.com/blog/posts/unity-render-state-props-ui/#StencilOp" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Keep</td>
<td style="text-align: left;">0</td>
</tr>
<tr>
<td style="text-align: left;">Zero</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">Replace</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">IncrementSaturate</td>
<td style="text-align: left;">3</td>
</tr>
<tr>
<td style="text-align: left;">DecrementSaturate</td>
<td style="text-align: left;">4</td>
</tr>
<tr>
<td style="text-align: left;">Invert</td>
<td style="text-align: left;">5</td>
</tr>
<tr>
<td style="text-align: left;">IncrementWrap</td>
<td style="text-align: left;">6</td>
</tr>
<tr>
<td style="text-align: left;">DecrementWrap</td>
<td style="text-align: left;">7</td>
</tr>
</tbody>
</table></body></html>